{% extends 'base.html' %}
{% load static %}

{% csrf_token %}

{% block content %}


<div class="cards-grid">
{% for profile in profiles %}

<div class="user-card">

    <div href="{% url 'profile_detail' profile.slug %}" class="user-card-link">
        <div class="user-card__avatar" >
            {% if profile.photo %}
                <img src="{{ profile.photo.url }}">
            {% else %}
                <img src="{% static 'assets/images/123.jpg' %}">
            {% endif %}

        </div>

        <div class="user-card-content-container">
            <h2 class="user-card__name">{{ profile.name }}</h2>

            <div class="user-card__skills">
                <div class="skills-marquee">
                    <div class="skills-track">
                        {% for skill in profile.skills.all %}
                            <span class="skill-chip">{{ skill.name }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <form class="like-form" data-profile-id="{{ profile.id }}">
        {% csrf_token %}
        <button type="s" class="like-btn">
            <img
                src="{% if profile.id in liked_profile_ids %}
                    {% static 'assets/icons/HeartOn.svg' %}
                {% else %}
                    {% static 'assets/icons/HeartOff.svg' %}
                {% endif %}"
                class="like-icon"
            >
        </button>
    </form>



</div>

{% endfor %}


{% comment %} <script>
document.querySelectorAll("a").forEach(link => {
    if (link.target === "_blank") return;

    link.addEventListener("click", e => {
        const href = link.getAttribute("href");

        if (!href || href.startsWith("#")) return;

        e.preventDefault();

        document.body.classList.add("fade-out");

        setTimeout(() => {
            window.location.href = href;
        }, 250);
    });
});
</script>
 {% endcomment %}


{% endblock %}
