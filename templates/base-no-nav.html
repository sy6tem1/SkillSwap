{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSwap</title>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>




<body>

<div id="page-fade"></div>

<div class="content-wrapper">
    <header class="app-header">

    </header>


    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>


</div>

</body>
</html>



<script>
(() => {
    const fade = document.getElementById("page-fade");
    let isTransitioning = false;

    function fadeAndGo(url) {
        if (isTransitioning) return;
        isTransitioning = true;

        if (fade) {
            fade.classList.add("active");
            setTimeout(() => {
                window.location.href = url;
            }, 380);
        } else {
            window.location.href = url;
        }
    }

    // Перехват кликов по ссылкам
    document.addEventListener("click", e => {
        const a = e.target.closest("a");
        if (!a) return;

        if (
            a.target === "_blank" ||
            a.hasAttribute("download") ||
            a.href.startsWith("javascript:")
        ) {
            return;
        }

        e.preventDefault();
        fadeAndGo(a.href);
    });

    // Перехват submit форм
    document.addEventListener("submit", e => {
        e.preventDefault();
        fadeAndGo(e.target.action);
    });

    // Сброс overlay при возврате (back/forward)
    window.addEventListener("pageshow", () => {
        isTransitioning = false;
        if (fade) fade.classList.remove("active");
    });
})();
</script>


